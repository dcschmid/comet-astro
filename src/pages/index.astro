---
import DocsLayout from '../layouts/DocsLayout.astro';
import Headline from '../components/Headline.astro';
import Paragraph from '../components/Paragraph.astro';
import Badge from '../components/Badge.astro';
import Card from '../components/Card.astro';
import {
  componentCatalog,
  componentCategories,
} from '../data/component-catalog';

const catalogByCategory = componentCategories
  .map((category) => ({
    ...category,
    items: componentCatalog
      .filter((component) => component.category === category.id)
      .sort((a, b) => a.name.localeCompare(b.name)),
  }))
  .filter((category) => category.items.length > 0);

const totalComponents = componentCatalog.length;
---

<DocsLayout
  title="Comet Astro"
  description="Production‑ready, WCAG AAA Astro components—semantic, high‑contrast, minimal JavaScript, and easy to customize."
  headlineSize="xl"
  descriptionSize="lg"
  prose={false}
  hideHeader={true}
>
  <div class="space-y-12">
    <!-- Centered Hero -->
    <section
      class="flex min-h-[70vh] flex-col items-center justify-center text-center gap-7"
    >
      <Headline
        level="h1"
        textSize="2xl"
        weight="extrabold"
        textAlign="center"
        className="tracking-tight"
      >
        Comet Astro
      </Headline>
      <Paragraph size="lg" variant="muted" align="center" maxWidth="prose">
        Production‑ready, WCAG AAA Astro components—semantic, high‑contrast,
        minimal JavaScript, and easy to customize.
      </Paragraph>
      <Paragraph size="md" variant="muted" align="center" maxWidth="prose">
        A curated set of accessible, performance‑focused Astro UI primitives
        built for real products. Every component ships with semantic HTML,
        keyboard interaction patterns, high contrast (WCAG AAA) defaults,
        Tailwind utility styling, and minimal client JavaScript.
      </Paragraph>
      <div class="mx-auto max-w-5xl grid gap-6 md:grid-cols-3">
        <Card elevation={2} class="p-5 flex flex-col gap-2">
          <Headline level="h3" textSize="sm" weight="bold" color="default"
            >Accessibility</Headline
          >
          <Paragraph size="sm" variant="muted"
            >WCAG AAA contrast, screen reader labels, logical focus order,
            reduced motion support.</Paragraph
          >
        </Card>
        <Card elevation={2} class="p-5 flex flex-col gap-2">
          <Headline level="h3" textSize="sm" weight="bold" color="default"
            >Performance</Headline
          >
          <Paragraph size="sm" variant="muted"
            >Server‑first rendering, lean hydration only where needed, no heavy
            client framework.</Paragraph
          >
        </Card>
        <Card elevation={2} class="p-5 flex flex-col gap-2">
          <Headline level="h3" textSize="sm" weight="bold" color="default"
            >Customization</Headline
          >
          <Paragraph size="sm" variant="muted"
            >Tailwind utilities, theming tokens, composable primitives, minimal
            surface area.</Paragraph
          >
        </Card>
      </div>
    </section>

    <!-- Stats -->
    <section
      class="grid grid-cols-1 gap-6 max-w-4xl mx-auto sm:grid-cols-3 mt-4"
    >
      <Card elevation={1} class="p-5 text-center flex flex-col gap-1">
        <Headline level="h3" textSize="sm" weight="bold" color="accent"
          >{totalComponents}</Headline
        >
        <Paragraph size="xs" variant="muted">Components</Paragraph>
      </Card>
      <Card elevation={1} class="p-5 text-center flex flex-col gap-1">
        <Headline level="h3" textSize="sm" weight="bold" color="accent"
          >{catalogByCategory.length}</Headline
        >
        <Paragraph size="xs" variant="muted">Categories</Paragraph>
      </Card>
      <Card elevation={1} class="p-5 text-center flex flex-col gap-1">
        <Headline level="h3" textSize="sm" weight="bold" color="success"
          >AAA</Headline
        >
        <Paragraph size="xs" variant="muted">Accessibility Target</Paragraph>
      </Card>
    </section>

    <!-- Components by Category -->
    {
      catalogByCategory.map((category) => (
        <section class="space-y-5">
          <div class="flex items-center gap-3">
            <div
              class={`text-xl w-10 h-10 rounded-lg bg-linear-to-br ${category.color} flex items-center justify-center`}
            >
              {category.icon}
            </div>
            <Headline
              level="h2"
              textSize="sm"
              weight="bold"
              color="default"
              className="m-0"
            >
              {category.id}
            </Headline>
            <Badge label={`${category.items.length}`} variant="neutral" />
          </div>
          <div class="grid gap-5 sm:grid-cols-2 lg:grid-cols-3">
            {category.items.map((component) => (
              <Card
                as="article"
                elevation={2}
                class="p-5 flex flex-col gap-2 hover:shadow-lg transition-shadow"
              >
                <Headline
                  level="h3"
                  textSize="xs"
                  weight="semibold"
                  color="accent"
                  className="m-0"
                >
                  <a
                    href={`/components/${component.slug}`}
                    class="focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-600 dark:focus-visible:ring-blue-300"
                  >
                    {component.name}
                  </a>
                </Headline>
                <Paragraph size="xs" variant="muted">
                  {component.description}
                </Paragraph>
                <div class="mt-auto flex items-center justify-between">
                  <a
                    href={`/components/${component.slug}`}
                    class="text-xs font-medium text-blue-700 dark:text-blue-300 hover:underline"
                  >
                    View docs
                  </a>
                  <Badge label="AAA" variant="success" />
                </div>
              </Card>
            ))}
          </div>
        </section>
      ))
    }

    <!-- Footer CTA -->
    <section
      class="text-center space-y-6 py-16 border-t border-slate-300 dark:border-slate-800"
    >
      <Headline level="h2" textSize="lg" weight="bold" textAlign="center"
        >Ready to build?</Headline
      >
      <Paragraph size="md" variant="muted" align="center" maxWidth="prose">
        Install via npm and start composing accessible, production‑grade UI
        without reinventing foundation pieces.
      </Paragraph>
      <Card
        elevation={3}
        class="inline-flex items-center gap-3 px-6 py-4 font-mono text-sm bg-slate-900 dark:bg-slate-800 text-slate-50 border border-slate-700 dark:border-slate-600"
      >
        npm install comet-astro
      </Card>
    </section>
  </div>
</DocsLayout>
