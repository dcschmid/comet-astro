---
import DocsLayout from '../../layouts/DocsLayout.astro';
import EmbedBase from '../../components/EmbedBase.astro';

const usageSnippet = `---
import { EmbedBase } from 'comet-astro';
---

<EmbedBase 
  src="https://www.youtube.com/embed/dQw4w9WgXcQ"
  title="YouTube video player"
  variant="card"
  aspectRatio="16:9"
  showLoading={true}
/>`;
---

<DocsLayout
  seoTitle="EmbedBase"
  seoDescription="Shared foundation component for all embed types with consistent loading states, error handling, accessibility features, and visual variants."
>
  <section class="space-y-4">
    <p class="text-base text-slate-100">
      EmbedBase is the foundation component used by all embed components in
      Comet, providing consistent loading states, error handling, accessibility
      features, and visual presentation across YouTube, Vimeo, Spotify, and
      other embeds.
    </p>
    <p class="text-base text-slate-200">
      This component ensures WCAG AAA compliance with proper contrast ratios,
      focus indicators, and screen reader support, while offering five visual
      variants and flexible aspect ratios for different use cases.
    </p>
    <p class="text-base text-slate-200">
      <strong>Note:</strong> EmbedBase is typically used internally by other embed
      components rather than directly in applications. For specific embed types,
      use YouTubeEmbed, VimeoEmbed, SpotifyEmbed, etc.
    </p>
  </section>

  <section class="mt-10 space-y-6">
    <h2 class="text-xl font-semibold text-slate-100">Props</h2>
    <dl class="grid gap-6 sm:grid-cols-2">
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          src
        </dt>
        <dd class="text-sm text-slate-200">
          Required iframe source URL for the embedded content.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          title
        </dt>
        <dd class="text-sm text-slate-200">
          Required accessible title for screen readers and iframe labeling.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          variant?
        </dt>
        <dd class="text-sm text-slate-200">
          Visual style variant. Choose <code>"default"</code>, <code
            >"inline"</code
          >,
          <code>"featured"</code>, <code>"minimal"</code>, or <code>"card"</code
          >. Defaults to <code>"default"</code>.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          size?
        </dt>
        <dd class="text-sm text-slate-200">
          Component size. Choose <code>"sm"</code>, <code>"md"</code>,
          <code>"lg"</code>, or <code>"xl"</code>. Defaults to <code>"md"</code
          >.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          aspectRatio?
        </dt>
        <dd class="text-sm text-slate-200">
          Aspect ratio constraint. Choose <code>"16:9"</code>, <code>"4:3"</code
          >,
          <code>"1:1"</code>, <code>"21:9"</code>, <code>"9:16"</code>,
          <code>"auto"</code>, or <code>"none"</code>. Defaults to <code
            >"16:9"</code
          >.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          loading?
        </dt>
        <dd class="text-sm text-slate-200">
          Show loading state with spinner. Defaults to <code>false</code>.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          error?
        </dt>
        <dd class="text-sm text-slate-200">
          Error message to display instead of iframe when content fails to load.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          lazy?
        </dt>
        <dd class="text-sm text-slate-200">
          Enable lazy loading for performance. Defaults to <code>true</code>.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          rounded?
        </dt>
        <dd class="text-sm text-slate-200">
          Apply rounded corners. Defaults to <code>true</code>.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          allowFullscreen?
        </dt>
        <dd class="text-sm text-slate-200">
          Allow fullscreen mode. Defaults to <code>true</code>.
        </dd>
      </div>
    </dl>
  </section>

  <section class="mt-10 space-y-6">
    <h2 class="text-xl font-semibold text-slate-100">Architecture Benefits</h2>
    <p class="text-base text-slate-200">
      EmbedBase provides shared functionality that ensures consistency across
      all embed components:
    </p>
    <ul class="list-disc pl-6 space-y-1 text-slate-200">
      <li>
        <strong>Code Reduction:</strong> 51% average reduction in component code
        by sharing common functionality
      </li>
      <li>
        <strong>Consistent Loading States:</strong> Unified loading spinner and error
        handling across all embeds
      </li>
      <li>
        <strong>Accessibility Compliance:</strong> WCAG AAA standards with 9:1 contrast
        ratios and proper ARIA attributes
      </li>
      <li>
        <strong>Visual Consistency:</strong> Five variants with consistent styling
        and behavior
      </li>
      <li>
        <strong>Performance:</strong> Lazy loading, optimized iframe attributes,
        and responsive design
      </li>
      <li>
        <strong>Maintainability:</strong> Centralized logic for updates and improvements
      </li>
    </ul>
  </section>

  <section class="mt-10 space-y-8">
    <h2 class="text-xl font-semibold text-slate-100">Visual Variants</h2>
    <div class="grid gap-6 lg:grid-cols-2">
      <!-- Default Variant -->
      <div class="space-y-3">
        <h3 class="text-lg font-medium text-slate-100">Default</h3>
        <p class="text-sm text-slate-300">
          Standard presentation with clean borders and spacing
        </p>
        <EmbedBase
          src="https://www.youtube.com/embed/dQw4w9WgXcQ"
          title="Default variant example"
          variant="default"
          aspectRatio="16:9"
        />
      </div>

      <!-- Card Variant -->
      <div class="space-y-3">
        <h3 class="text-lg font-medium text-slate-100">Card</h3>
        <p class="text-sm text-slate-300">
          Enhanced with shadow and background for prominent display
        </p>
        <EmbedBase
          src="https://www.youtube.com/embed/dQw4w9WgXcQ"
          title="Card variant example"
          variant="card"
          aspectRatio="16:9"
        />
      </div>

      <!-- Featured Variant -->
      <div class="space-y-3">
        <h3 class="text-lg font-medium text-slate-100">Featured</h3>
        <p class="text-sm text-slate-300">
          Bold styling for hero sections and prominent content
        </p>
        <EmbedBase
          src="https://www.youtube.com/embed/dQw4w9WgXcQ"
          title="Featured variant example"
          variant="featured"
          aspectRatio="16:9"
        />
      </div>

      <!-- Minimal Variant -->
      <div class="space-y-3">
        <h3 class="text-lg font-medium text-slate-100">Minimal</h3>
        <p class="text-sm text-slate-300">
          Clean presentation with reduced styling for content focus
        </p>
        <EmbedBase
          src="https://www.youtube.com/embed/dQw4w9WgXcQ"
          title="Minimal variant example"
          variant="minimal"
          aspectRatio="16:9"
        />
      </div>

      <!-- Inline Variant -->
      <div class="space-y-3">
        <h3 class="text-lg font-medium text-slate-100">Inline</h3>
        <p class="text-sm text-slate-300">
          Seamless integration within text content
        </p>
        <EmbedBase
          src="https://www.youtube.com/embed/dQw4w9WgXcQ"
          title="Inline variant example"
          variant="inline"
          aspectRatio="16:9"
        />
      </div>
    </div>
  </section>

  <section class="mt-10 space-y-8">
    <h2 class="text-xl font-semibold text-slate-100">Aspect Ratios</h2>
    <div class="grid gap-4 md:grid-cols-3">
      <div class="space-y-2">
        <h4 class="font-medium text-slate-200">16:9 (Standard)</h4>
        <EmbedBase
          src="https://www.youtube.com/embed/dQw4w9WgXcQ"
          title="16:9 aspect ratio"
          aspectRatio="16:9"
          variant="minimal"
        />
      </div>
      <div class="space-y-2">
        <h4 class="font-medium text-slate-200">1:1 (Square)</h4>
        <EmbedBase
          src="https://www.youtube.com/embed/dQw4w9WgXcQ"
          title="1:1 aspect ratio"
          aspectRatio="1:1"
          variant="minimal"
        />
      </div>
      <div class="space-y-2">
        <h4 class="font-medium text-slate-200">4:3 (Classic)</h4>
        <EmbedBase
          src="https://www.youtube.com/embed/dQw4w9WgXcQ"
          title="4:3 aspect ratio"
          aspectRatio="4:3"
          variant="minimal"
        />
      </div>
    </div>
  </section>

  <section class="mt-10 space-y-8">
    <h2 class="text-xl font-semibold text-slate-100">States</h2>
    <div class="grid gap-6 lg:grid-cols-2">
      <!-- Loading State -->
      <div class="space-y-3">
        <h3 class="text-lg font-medium text-slate-100">Loading State</h3>
        <p class="text-sm text-slate-300">
          Shows loading spinner while content loads
        </p>
        <EmbedBase
          src="https://www.youtube.com/embed/dQw4w9WgXcQ"
          title="Loading state example"
          loading={true}
          variant="card"
          aspectRatio="16:9"
        />
      </div>

      <!-- Error State -->
      <div class="space-y-3">
        <h3 class="text-lg font-medium text-slate-100">Error State</h3>
        <p class="text-sm text-slate-300">
          User-friendly error message when content fails to load
        </p>
        <EmbedBase
          src=""
          title="Error state example"
          error="Content could not be loaded. Please try again later."
          variant="card"
          aspectRatio="16:9"
        />
      </div>
    </div>
  </section>

  <section class="mt-10 space-y-6">
    <h2 class="text-xl font-semibold text-slate-100">Usage</h2>
    <p class="text-base text-slate-200">
      While EmbedBase can be used directly, it's recommended to use the specific
      embed components (YouTubeEmbed, VimeoEmbed, etc.) which provide optimized
      configurations and additional features for each platform.
    </p>
    <pre
      class="overflow-x-auto rounded-lg border border-slate-700/70 bg-slate-950/80 p-4 text-sm text-slate-50 shadow-inner">
      <code class="language-astro">{usageSnippet}</code>
    </pre>
  </section>

  <section class="mt-10 space-y-4">
    <h2 class="text-xl font-semibold text-slate-100">
      Components Using EmbedBase
    </h2>
    <p class="text-base text-slate-200">
      The following components are built on top of EmbedBase:
    </p>
    <div class="grid gap-3 sm:grid-cols-2 lg:grid-cols-3">
      <div
        class="rounded-lg border border-slate-700/75 bg-slate-900/60 p-3 text-sm"
      >
        <strong class="text-slate-200">YouTubeEmbed</strong>
        <p class="text-slate-400">YouTube video integration</p>
      </div>
      <div
        class="rounded-lg border border-slate-700/75 bg-slate-900/60 p-3 text-sm"
      >
        <strong class="text-slate-200">VimeoEmbed</strong>
        <p class="text-slate-400">Vimeo video integration</p>
      </div>
      <div
        class="rounded-lg border border-slate-700/75 bg-slate-900/60 p-3 text-sm"
      >
        <strong class="text-slate-200">SpotifyEmbed</strong>
        <p class="text-slate-400">Spotify content integration</p>
      </div>
      <div
        class="rounded-lg border border-slate-700/75 bg-slate-900/60 p-3 text-sm"
      >
        <strong class="text-slate-200">AppleMusicEmbed</strong>
        <p class="text-slate-400">Apple Music integration</p>
      </div>
      <div
        class="rounded-lg border border-slate-700/75 bg-slate-900/60 p-3 text-sm"
      >
        <strong class="text-slate-200">TikTokEmbed</strong>
        <p class="text-slate-400">TikTok video integration</p>
      </div>
      <div
        class="rounded-lg border border-slate-700/75 bg-slate-900/60 p-3 text-sm"
      >
        <strong class="text-slate-200">TwitterEmbed</strong>
        <p class="text-slate-400">Twitter/X content integration</p>
      </div>
      <div
        class="rounded-lg border border-slate-700/75 bg-slate-900/60 p-3 text-sm"
      >
        <strong class="text-slate-200">MapEmbed</strong>
        <p class="text-slate-400">Interactive map integration</p>
      </div>
    </div>
  </section>

  <section class="mt-10 space-y-4">
    <h2 class="text-xl font-semibold text-slate-100">Accessibility</h2>
    <p class="text-base text-slate-200">
      EmbedBase ensures WCAG AAA compliance across all embed components with:
    </p>
    <ul class="list-disc pl-6 space-y-1 text-slate-200">
      <li>9:1 contrast ratios in all color schemes and variants</li>
      <li>Proper ARIA labels and semantic HTML structure</li>
      <li>Keyboard navigation support with visible focus indicators</li>
      <li>Screen reader announcements for loading and error states</li>
      <li>High contrast mode compatibility</li>
      <li>Reduced motion support for loading animations</li>
      <li>Descriptive fallback content for JavaScript-disabled browsers</li>
    </ul>
  </section>

  <section class="mt-10 space-y-4">
    <h2 class="text-xl font-semibold text-slate-100">Performance Features</h2>
    <ul class="list-disc pl-6 space-y-1 text-slate-200">
      <li><strong>Lazy Loading:</strong> Iframes load only when in viewport</li>
      <li>
        <strong>Optimized Attributes:</strong> Proper iframe sandboxing and allow
        policies
      </li>
      <li>
        <strong>Responsive Design:</strong> Efficient aspect ratio handling without
        layout shifts
      </li>
      <li>
        <strong>Error Boundaries:</strong> Graceful handling of failed embeds
      </li>
      <li>
        <strong>Loading States:</strong> Visual feedback during content loading
      </li>
    </ul>
  </section>
</DocsLayout>
