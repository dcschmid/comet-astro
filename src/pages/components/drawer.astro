---
import DocsLayout from '../../layouts/DocsLayout.astro';
import DrawerComponent from '../../components/Drawer.astro';

const usageSnippet = `---
import { Drawer } from 'comet-astro';

---

<button
  data-drawer-trigger="example-drawer"
  type="button"
  class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
>
  Open Drawer
</button>

<Drawer id="example-drawer" title="Settings" position="right" size="md">
  <p>Your drawer content goes here</p>
  <Fragment slot="actions">
    <button data-drawer-close>Cancel</button>
    <button class="bg-blue-600 text-white px-4 py-2 rounded">
      Save Changes
    </button>
  </Fragment>
</Drawer>`;

const leftId = 'demo-drawer-left';
const rightId = 'demo-drawer-right';
const smallId = 'demo-drawer-small';
const largeId = 'demo-drawer-large';
const customId = 'demo-drawer-custom';
---

<DocsLayout
  seoTitle="Drawer"
  seoDescription="Accessible slide-in panels with WCAG AAA contrast, focus management, and responsive sizing."
>
  <section class="space-y-4">
    <p class="text-base text-slate-100">
      Drawer provides slide-in panel interfaces that anchor to viewport edges
      with comprehensive accessibility features. The component maintains WCAG
      AAA contrast ratios across all interactive elements and includes focus
      trapping, keyboard navigation, and proper ARIA announcements.
    </p>
    <p class="text-base text-slate-200">
      Focus management includes automatic trapping within the drawer, backdrop
      dismissal, and restoration to the triggering element when closed. ESC key
      handling and smooth animations provide intuitive interaction patterns for
      both mouse and keyboard users.
    </p>
  </section>

  <section class="mt-10 space-y-6">
    <h2 class="text-xl font-semibold text-slate-100">Props</h2>
    <dl class="grid gap-6 sm:grid-cols-2">
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          id
        </dt>
        <dd class="text-sm text-slate-200">
          Required unique identifier for the drawer element. Used for triggering
          with <code>data-drawer-trigger</code>.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          title?
        </dt>
        <dd class="text-sm text-slate-200">
          Optional header title for the drawer. Creates accessible heading with
          proper ARIA labeling.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          position?
        </dt>
        <dd class="text-sm text-slate-200">
          Drawer anchor position: <code>"left"</code> or <code>"right"</code>.
          Defaults to <code>"right"</code>.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          size?
        </dt>
        <dd class="text-sm text-slate-200">
          Drawer width preset: <code>"sm"</code>, <code>"md"</code>, <code
            >"lg"</code
          >, or <code>"full"</code>. Defaults to <code>"md"</code>.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          dismissible?
        </dt>
        <dd class="text-sm text-slate-200">
          Shows close button and enables backdrop/ESC dismissal. Defaults to <code
            >true</code
          >.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          className?
        </dt>
        <dd class="text-sm text-slate-200">
          Additional CSS classes to apply to the drawer panel for custom
          styling.
        </dd>
      </div>
    </dl>
  </section>

  <section class="mt-10 space-y-6">
    <h2 class="text-xl font-semibold text-slate-100">Usage</h2>
    <p class="text-base text-slate-200">
      Create a trigger element with <code>data-drawer-trigger</code> pointing to
      the drawer ID. The drawer handles opening, focus management, and closing automatically.
      Customize actions using the "actions" slot for complex interactions.
    </p>
    <pre
      class="overflow-x-auto rounded-lg border border-slate-700/70 bg-slate-950/80 p-4 text-sm text-slate-50 shadow-inner">
      <code class="language-astro">{usageSnippet}</code>
    </pre>
  </section>

  <section class="mt-10 space-y-8">
    <h2 class="text-xl font-semibold text-slate-100">Position Examples</h2>
    <p class="text-base text-slate-200">
      Drawers can slide in from the left or right edge of the viewport.
    </p>
    <div class="flex flex-wrap gap-4">
      <button
        data-drawer-trigger={leftId}
        class="rounded-lg bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"
        type="button"
      >
        Open Left Drawer
      </button>
      <button
        data-drawer-trigger={rightId}
        class="rounded-lg bg-green-600 px-4 py-2 text-white transition-colors hover:bg-green-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2"
        type="button"
      >
        Open Right Drawer
      </button>
    </div>

    <DrawerComponent id={leftId} title="Left Navigation" position="left">
      <div class="space-y-4">
        <p>This drawer slides in from the left side of the screen.</p>
        <nav class="space-y-2">
          <a
            href="#"
            class="block rounded px-3 py-2 text-slate-800 hover:bg-slate-100 dark:text-slate-200 dark:hover:bg-slate-700"
            >Home</a
          >
          <a
            href="#"
            class="block rounded px-3 py-2 text-slate-800 hover:bg-slate-100 dark:text-slate-200 dark:hover:bg-slate-700"
            >About</a
          >
          <a
            href="#"
            class="block rounded px-3 py-2 text-slate-800 hover:bg-slate-100 dark:text-slate-200 dark:hover:bg-slate-700"
            >Contact</a
          >
        </nav>
      </div>
    </DrawerComponent>

    <DrawerComponent id={rightId} title="Settings Panel" position="right">
      <div class="space-y-4">
        <p>This drawer slides in from the right side of the screen.</p>
        <div class="space-y-3">
          <label class="flex items-center gap-2">
            <input type="checkbox" class="rounded border-slate-300" />
            <span>Enable notifications</span>
          </label>
          <label class="flex items-center gap-2">
            <input type="checkbox" class="rounded border-slate-300" />
            <span>Dark mode</span>
          </label>
        </div>
      </div>
    </DrawerComponent>
  </section>

  <section class="mt-10 space-y-8">
    <h2 class="text-xl font-semibold text-slate-100">Size Variants</h2>
    <p class="text-base text-slate-200">
      Choose from predefined size variants to match your content needs.
    </p>
    <div class="flex flex-wrap gap-3">
      <button
        data-drawer-trigger={smallId}
        class="rounded-lg bg-slate-600 px-3 py-2 text-sm text-white transition-colors hover:bg-slate-700"
        type="button"
      >
        Small Drawer
      </button>
      <button
        data-drawer-trigger={largeId}
        class="rounded-lg bg-slate-600 px-3 py-2 text-sm text-white transition-colors hover:bg-slate-700"
        type="button"
      >
        Large Drawer
      </button>
    </div>

    <DrawerComponent id={smallId} title="Small Drawer" size="sm">
      <p>
        This is a small drawer perfect for quick actions or navigation menus
        with minimal content.
      </p>
    </DrawerComponent>

    <DrawerComponent id={largeId} title="Large Content Drawer" size="lg">
      <div class="space-y-4">
        <p>
          Large drawers provide more space for forms, detailed content, or
          complex interactions.
        </p>
        <div class="space-y-3">
          <div>
            <label
              class="block text-sm font-medium text-slate-800 dark:text-slate-200"
              >Name</label
            >
            <input
              type="text"
              class="mt-1 block w-full rounded border-slate-300 px-3 py-2"
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-slate-800 dark:text-slate-200"
              >Email</label
            >
            <input
              type="email"
              class="mt-1 block w-full rounded border-slate-300 px-3 py-2"
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-slate-800 dark:text-slate-200"
              >Message</label
            >
            <textarea
              rows="4"
              class="mt-1 block w-full rounded border-slate-300 px-3 py-2"
            ></textarea>
          </div>
        </div>
      </div>
    </DrawerComponent>
  </section>

  <section class="mt-10 space-y-8">
    <h2 class="text-xl font-semibold text-slate-100">Custom Actions</h2>
    <p class="text-base text-slate-200">
      Override the default close button with custom action buttons using the
      "actions" slot.
    </p>
    <div class="space-y-4">
      <button
        data-drawer-trigger={customId}
        class="rounded-lg bg-purple-600 px-4 py-2 text-white transition-colors hover:bg-purple-700"
        type="button"
      >
        Edit Profile
      </button>
      <DrawerComponent id={customId} title="Edit Profile">
        <div class="space-y-4">
          <p>Make changes to your profile information below.</p>
          <div class="space-y-3">
            <div>
              <label
                class="block text-sm font-medium text-slate-800 dark:text-slate-200"
                >Display Name</label
              >
              <input
                type="text"
                value="John Doe"
                class="mt-1 block w-full rounded border-slate-300 px-3 py-2"
              />
            </div>
            <div>
              <label
                class="block text-sm font-medium text-slate-800 dark:text-slate-200"
                >Bio</label
              >
              <textarea
                rows="3"
                class="mt-1 block w-full rounded border-slate-300 px-3 py-2"
                >Software developer passionate about accessibility and user
                experience.</textarea
              >
            </div>
          </div>
        </div>
        <Fragment slot="actions">
          <div class="flex flex-col gap-2 sm:flex-row sm:justify-end">
            <button
              data-drawer-close
              class="rounded-lg border border-slate-300/90 bg-white px-4 py-2.5 text-sm font-semibold text-slate-800 transition-colors hover:bg-slate-50 dark:border-slate-500/90 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600"
              type="button"
            >
              Cancel
            </button>
            <button
              class="rounded-lg bg-purple-600 px-4 py-2.5 text-sm font-semibold text-white transition-colors hover:bg-purple-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-500 focus-visible:ring-offset-2"
              type="button"
              onclick="this.closest('[data-drawer]').querySelector('[data-drawer-close]').click(); /* Add your save logic here */"
            >
              Save Changes
            </button>
          </div>
        </Fragment>
      </DrawerComponent>
    </div>
  </section>

  <section class="mt-10 space-y-4">
    <h2 class="text-xl font-semibold text-slate-100">Accessibility</h2>
    <p class="text-base text-slate-200">
      Contrast ratios exceed WCAG AAA requirements (7:1+) across all drawer
      elements including headers, content areas, and action buttons in both
      light and dark themes. Focus indicators use 2px visible rings with proper
      offset values for clear keyboard navigation.
    </p>
    <p class="text-base text-slate-200">
      Focus management includes automatic trapping within the drawer,
      restoration to the triggering element on close, and initial focus
      placement on the first interactive element. ESC key handling and backdrop
      clicks provide intuitive dismissal patterns with smooth animations.
    </p>
    <p class="text-base text-slate-200">
      The drawer uses semantic HTML with proper ARIA attributes including <code
        >aria-modal</code
      >,
      <code>aria-labelledby</code>, and role assignments. Body scroll is locked
      when open to prevent background interaction, and screen readers receive
      appropriate announcements for state changes.
    </p>
  </section>
</DocsLayout>
