---
import DocsLayout from '../../layouts/DocsLayout.astro';
import ButtonLink from '../../components/ButtonLink.astro';
// ComponentDocsSections intentionally not used here to keep props markup explicit

const usageSnippet = `---
import { ButtonLink } from 'comet-astro';

---

<div class="flex gap-3 flex-wrap">
  <ButtonLink href="/docs/getting-started" label="Get started" />
  <ButtonLink
    href="https://astro.build"
    target="_blank"
    label="Visit Astro"
  />
</div>`;
---

<DocsLayout
  seoTitle="ButtonLink"
  seoDescription="High-contrast anchor-style buttons with external link detection and keyboard-friendly focus rings."
>
  <section class="space-y-4">
    <p class="text-base text-slate-100">
      ButtonLink renders an anchor that looks and feels like a button—useful
      when you need a visually prominent navigation action without breaking
      semantic links. Palettes meet WCAG AAA in both themes, icons align with
      text by default, and focus rings expand to 4&nbsp;px with offset
      backgrounds.
    </p>
    <p class="text-base text-slate-200">
      External URLs inherit a visible indicator, open in a new tab, and append
      screen reader copy automatically. Override the behaviour with props when
      you need explicit control.
    </p>
    <p class="text-base text-slate-200">
      Built on top of <strong>ButtonBase</strong>, this component now supports
      all three size variants (sm, md, lg) and provides consistent styling with
      the Button component while maintaining dedicated anchor-only
      functionality.
    </p>
  </section>

  <section id="props" class="space-y-4">
    <div class="flex items-center justify-between gap-4">
      <h2
        class="text-xl font-semibold tracking-tight text-slate-900 dark:text-slate-50"
      >
        Props
      </h2>
      <a
        href="#props"
        class="ml-2 inline-flex h-6 w-6 items-center justify-center rounded-full bg-transparent text-slate-600 hover:bg-slate-100 hover:text-sky-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-sky-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500"
        aria-label="Permalink Props"
      >
        <span aria-hidden class="text-xs font-semibold">#</span>
      </a>
    </div>

    <div
      class="prose max-w-none text-sm leading-relaxed text-slate-700 dark:text-slate-300 space-y-3"
    >
      <table
        class="w-full text-sm border border-neutral-200 dark:border-neutral-800 rounded-md overflow-hidden"
      >
        <thead class="bg-neutral-50 dark:bg-neutral-800">
          <tr>
            <th class="p-2 text-left">Prop</th>
            <th class="p-2 text-left">Type</th>
            <th class="p-2 text-left">Default</th>
            <th class="p-2 text-left">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-t border-neutral-200 dark:border-neutral-800">
            <td class="p-2 font-mono">href</td>
            <td class="p-2 font-mono">string</td>
            <td class="p-2 font-mono">—</td>
            <td class="p-2">Destination URL for the link (required).</td>
          </tr>
          <tr class="border-t border-neutral-200 dark:border-neutral-800">
            <td class="p-2 font-mono">label</td>
            <td class="p-2 font-mono">string</td>
            <td class="p-2 font-mono">—</td>
            <td class="p-2">Visible text when no slot content is provided.</td>
          </tr>
          <tr class="border-t border-neutral-200 dark:border-neutral-800">
            <td class="p-2 font-mono">size</td>
            <td class="p-2 font-mono">'sm' | 'md' | 'lg'</td>
            <td class="p-2 font-mono">'md'</td>
            <td class="p-2">Adjusts height and padding.</td>
          </tr>
          <tr class="border-t border-neutral-200 dark:border-neutral-800">
            <td class="p-2 font-mono">variant</td>
            <td class="p-2 font-mono">'primary' | 'secondary' | 'ghost'</td>
            <td class="p-2 font-mono">'primary'</td>
            <td class="p-2">Visual treatment for the link.</td>
          </tr>
          <tr class="border-t border-neutral-200 dark:border-neutral-800">
            <td class="p-2 font-mono">loading</td>
            <td class="p-2 font-mono">boolean</td>
            <td class="p-2 font-mono">false</td>
            <td class="p-2">Shows spinner and sets <code>aria-busy</code>.</td>
          </tr>
          <tr class="border-t border-neutral-200 dark:border-neutral-800">
            <td class="p-2 font-mono">icon</td>
            <td class="p-2 font-mono">string</td>
            <td class="p-2 font-mono">—</td>
            <td class="p-2"
              >Optional icon name to render before the label using the <code
                >Icon</code
              > component.</td
            >
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <section class="mt-10 space-y-6">
    <h2 class="text-xl font-semibold text-slate-100">Usage</h2>
    <p class="text-base text-slate-200">
      Import the component, pass your URL, and decide whether to provide slot
      content or just a <code>label</code>. The external affordance kicks in
      whenever <code>target="_blank"</code> is present or you manually set the props.
    </p>
    <pre
      class="overflow-x-auto rounded-lg border border-slate-700/70 bg-slate-950/80 p-4 text-sm text-slate-50 shadow-inner">
      <code class="language-astro">{usageSnippet}</code>
    </pre>
    <h3 class="text-base font-semibold text-slate-100">Icon example</h3>
    <p class="text-sm text-slate-200">
      Quick usage with the built-in <code>Icon</code> set:
    </p>
    <div class="flex gap-3">
      <ButtonLink href="#" icon="plus">Add</ButtonLink>
      <ButtonLink href="#" variant="secondary" icon="external">Open</ButtonLink>
      <ButtonLink href="#" variant="ghost" icon="x">Close</ButtonLink>
    </div>
  </section>

  <section class="mt-10 space-y-8">
    <h2 class="text-xl font-semibold text-slate-100">Loading state</h2>
    <p class="text-base text-slate-200">
      `ButtonLink` supports the same <code>loading</code> prop as <code
        >Button</code
      >. This renders a spinner and sets <code>aria-busy</code> for assistive technologies.
      Use <code>loadingLabel</code> to provide custom screen reader text while the
      link is busy.
    </p>
    <div class="flex gap-3">
      <ButtonLink href="#" loading label="Processing" />
      <ButtonLink href="#" variant="destructive" loading label="Deleting" />
    </div>
  </section>

  <section class="mt-10 space-y-6">
    <h2 class="text-xl font-semibold text-slate-100">Overriding styles</h2>
    <p class="text-base text-slate-200">
      The same two approaches apply to <code>ButtonLink</code>: pass a
      <code>class</code> to add or override Tailwind utilities, or compute classes
      with the <code>buttonVariants</code> helper for programmatic composition. Remember
      to include <code>dark:...</code> utilities for color overrides when your site
      uses a dark theme.
    </p>
    <div class="flex gap-3">
      <ButtonLink
        href="#"
        class="bg-emerald-600 border-emerald-600 text-white dark:bg-emerald-700 dark:border-emerald-700"
        >Green link</ButtonLink
      >
      <ButtonLink
        href="#"
        variant="ghost"
        class="text-violet-400 dark:text-violet-300">Violet ghost</ButtonLink
      >
    </div>
    <pre
      class="overflow-x-auto rounded-lg border border-slate-700/70 bg-slate-950/80 p-4 text-sm text-slate-50 shadow-inner">
      <code class="language-ts">{`// Local helper example - create this in your app
import { tv } from 'tailwind-variants';

const myButton = tv({ base: 'inline-flex items-center', variants: { variant: { secondary: 'bg-slate-800 text-white' } } });

const custom = myButton({ variant: 'secondary', class: 'rounded-full px-5' });

<ButtonLink href="/" class={custom}>Rounded Link</ButtonLink>`}</code>
    </pre>
  </section>

  <section class="mt-10 space-y-8">
    <h2 class="text-xl font-semibold text-slate-100">
      ButtonBase Architecture
    </h2>
    <p class="text-base text-slate-200">
      This component is built on top of ButtonBase, providing:
    </p>
    <ul class="list-disc pl-6 space-y-1 text-slate-200">
      <li>
        <strong>Always Anchor:</strong> Consistently renders as <code>a</code> element
        with <code>as="a"</code>
      </li>
      <li>
        <strong>Three Size Variants:</strong> Now supports sm, md, and lg sizes (previously
        had fixed size)
      </li>
      <li>
        <strong>Unified Styling:</strong> Consistent appearance with Button component
        through shared ButtonBase
      </li>
      <li>
        <strong>External Link Handling:</strong> Automatic detection and proper attributes
        for external URLs
      </li>
      <li>
        <strong>Enhanced Accessibility:</strong> Proper ARIA attributes and screen
        reader support
      </li>
    </ul>
  </section>

  <section class="mt-10 space-y-8">
    <h2 class="text-xl font-semibold text-slate-100">Size Variants</h2>
    <div class="flex flex-wrap items-center gap-3">
      <ButtonLink href="#" size="sm" label="Small ButtonLink" />
      <ButtonLink href="#" size="md" label="Medium ButtonLink" />
      <ButtonLink href="#" size="lg" label="Large ButtonLink" />
    </div>
  </section>

  <section class="mt-10 space-y-8">
    <h2 class="text-xl font-semibold text-slate-100">Variants</h2>
    <div class="flex flex-wrap gap-3">
      <ButtonLink href="#" variant="primary" label="Primary ButtonLink" />
      <ButtonLink href="#" variant="secondary" label="Secondary ButtonLink" />
      <ButtonLink href="#" variant="ghost" label="Ghost ButtonLink" />
    </div>
  </section>

  <section class="mt-10 space-y-8">
    <h2 class="text-xl font-semibold text-slate-100">Examples</h2>
    <div class="flex flex-wrap gap-3">
      <ButtonLink href="/docs/design-system" label="Primary link" />
      <ButtonLink
        href="/docs/feedback"
        label="Secondary link"
        variant="secondary"
      />
      <ButtonLink
        href="https://example.com/privacy"
        target="_blank"
        label="Privacy policy"
      />
      <ButtonLink
        href="/docs/components"
        label="Small link"
        size="sm"
        variant="ghost"
      />
    </div>
  </section>

  <section class="mt-10 space-y-4">
    <h2 class="text-xl font-semibold text-slate-100">Accessibility</h2>
    <p class="text-base text-slate-200">
      Focus-visible outlines expand to 4&nbsp;px and include theme-appropriate
      offsets so the active element is easy to spot. Background and text
      combinations exceed a 9:1 contrast ratio in both themes and hover states.
    </p>
    <p class="text-base text-slate-200">
      The external indicator pairs a visible icon with off-screen text, ensuring
      screen reader and sighted users receive the same cue. When linking to the
      current page, omit <code>target="_blank"</code> to prevent unnecessary context
      changes.
    </p>
  </section>
</DocsLayout>
