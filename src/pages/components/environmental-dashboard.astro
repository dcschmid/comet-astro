---
import DocsLayout from '../../layouts/DocsLayout.astro';
import EnvironmentalDashboard from '../../components/EnvironmentalDashboard.astro';

const usageSnippet = `---\nimport { EnvironmentalDashboard } from 'comet-astro';\n\n---\n<!-- Static demo (fallback values) -->\n<EnvironmentalDashboard />\n\n<!-- Live weather + air quality (auto refresh every 15 min) -->\n<EnvironmentalDashboard latitude={52.52} longitude={13.405} location="Berlin" refreshInterval={15} />\n\n<!-- Fahrenheit and no wind -->\n<EnvironmentalDashboard latitude={34.05} longitude={-118.24} location="Los Angeles" unit="f" showWind={false} />\n\n<!-- Disable fetch (force static even with coords) -->\n<EnvironmentalDashboard latitude={40.71} longitude={-74.00} disableFetch={true} location="NYC (Static)" />`;

const props = [
  { name: 'latitude?', desc: 'Decimal latitude for live fetch.' },
  { name: 'longitude?', desc: 'Decimal longitude for live fetch.' },
  { name: 'location?', desc: 'Display label used in accessible region label.' },
  { name: 'unit?', desc: '"c" or "f" (default "c").' },
  { name: 'showAirQuality?', desc: 'Show AQI + PM2.5 cards (default true).' },
  { name: 'showWind?', desc: 'Show wind speed + direction (default true).' },
  { name: 'refreshInterval?', desc: 'Auto refresh in minutes (0 = disabled).' },
  {
    name: 'disableFetch?',
    desc: 'Force static fallback even when coordinates present.',
  },
  { name: 'class?', desc: 'Extra Tailwind utility classes.' },
  { name: 'ariaLabel?', desc: 'Custom accessible label override.' },
];
---

<DocsLayout
  seoTitle="EnvironmentalDashboard"
  seoDescription="Unified environmental snapshot (temperature, humidity, wind, AQI, PM2.5) with optional Open‑Meteo live fetch; WCAG AAA, no dashboard bloat."
  prose={true}
>
  <section class="space-y-4">
    <p class="text-base text-slate-100">
      <strong>EnvironmentalDashboard</strong> merges core near‑term climate signals
      into one compact panel: temperature (°C/°F), humidity %, wind speed + direction,
      AQI index, and PM2.5 concentration. Everything extraneous (tab systems, deep
      charts, historical time‑series, pollen expansion, alert feeds) is purposely
      omitted to keep DOM weight and cognitive load low.
    </p>
    <p class="text-base text-slate-200">
      Provide <code>latitude</code> + <code>longitude</code> for live Open‑Meteo
      weather + air quality queries; otherwise deterministic fallback data renders
      server‑side enabling SSR / SSG resilience. Use <code>refreshInterval</code
      > for passive updates; leave at 0 for edge‑cache friendly static export.
    </p>
    <p class="text-base text-slate-200">
      Accessibility: a single labeled <code>region</code>, one polite status
      line (no multi‑live spam), <code>aria-busy</code> during fetch, color never
      the sole conveyor (each card has explicit textual value + unit). Motion effects
      are disabled under <code>prefers-reduced-motion</code>; high contrast mode
      adds outline emphasis. Text contrast ≥9:1 maintained across themes.
    </p>
    <p class="text-sm text-slate-500 dark:text-slate-400">
      Best suited for: overview dashboards, sidebars, kiosk displays, embed
      iframes. Not suitable for predictive modeling, regulatory compliance
      reporting, or fine‑grained pollutant breakdown beyond PM2.5.
    </p>
  </section>

  <section class="mt-10 space-y-6">
    <h2 class="text-xl font-semibold text-slate-100">Props</h2>
    <dl class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {
        props.map((p) => (
          <div class="space-y-1 rounded-lg border border-slate-700/70 bg-slate-900/60 p-4 shadow-sm">
            <dt class="text-sm font-semibold uppercase tracking-wide text-slate-200">
              {p.name}
            </dt>
            <dd class="text-sm text-slate-300">{p.desc}</dd>
          </div>
        ))
      }
    </dl>
  </section>

  <section class="mt-10 space-y-6">
    <h2 class="text-xl font-semibold text-slate-100">Usage</h2>
    <p class="text-base text-slate-200">
      Drop in the component; configure only the metrics you need. Provide
      coordinates for real data, or omit to keep a static placeholder.
    </p>
    <pre
      class="overflow-x-auto rounded-lg border border-slate-700/70 bg-slate-950/80 p-4 text-sm text-slate-50 shadow-inner"><code class="language-astro">{usageSnippet}</code></pre>
  </section>

  <section class="mt-10 space-y-8">
    <h2 class="text-xl font-semibold text-slate-100">Live Example</h2>
    <p class="text-base text-slate-200">
      Berlin example (auto refresh disabled for demo).
    </p>
    <div class="max-w-full">
      <EnvironmentalDashboard
        latitude={52.52}
        longitude={13.405}
        location="Berlin"
        refreshInterval={0}
      />
    </div>
  </section>

  <section class="mt-10 space-y-4">
    <h2 class="text-xl font-semibold text-slate-100">Accessibility</h2>
    <ul class="list-disc pl-6 space-y-1 text-slate-200">
      <li>
        <strong>Semantic Region:</strong>
        <code>role="region"</code> + generated accessible label.
      </li>
      <li>
        <strong>WCAG AAA Contrast:</strong> Slate palette pairings exceed 7:1 (text
        vs background) in light & dark.
      </li>
      <li>
        <strong>Meaningful Without Color:</strong> Each card exposes value + textual
        unit/category.
      </li>
      <li>
        <strong>Live Updates:</strong> Single polite status line instead of multiple
        aria-live regions.
      </li>
      <li>
        <strong>Loading / Error States:</strong>
        <code>aria-busy</code> on container; inline “Loading…” / “Error” badges.
      </li>
      <li>
        <strong>Reduced Motion Safe:</strong> Shimmer/pulse removed under <code
          >prefers-reduced-motion</code
        >.
      </li>
      <li>
        <strong>No Overengineering:</strong> No nested tabs, charts, or complex interactions—pure
        snapshot.
      </li>
    </ul>
  </section>
</DocsLayout>
