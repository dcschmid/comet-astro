---
import DocsLayout from '../../layouts/DocsLayout.astro';
import Alert from '../../components/Alert.astro';
import Paragraph from '../../components/Paragraph.astro';
import InlineCode from '../../components/InlineCode.astro';
import Table from '../../components/Table.astro';
import Headline from '../../components/Headline.astro';

const variantExamples = [
  // semantic examples (aliases kept for compatibility)
  {
    variant: 'info',
    title: 'Heads up',
    message:
      'We refreshed our privacy policy. Review the highlights in 3 minutes.',
  },
  {
    variant: 'success',
    title: 'All saved',
    message: 'Your profile updates are live and visible to teammates.',
  },
  {
    variant: 'warning',
    title: 'Action suggested',
    message: 'Double-check your billing details before the next cycle.',
  },
  {
    variant: 'error',
    title: 'Sync failed',
    message: 'We could not reach the API. Try again in a few minutes.',
  },
  // new palette examples
  {
    variant: 'classic',
    title: 'Classic',
    message: 'Classic Blue surface and accent.',
  },
  {
    variant: 'nature',
    title: 'Nature',
    message: 'Nature Green surface and accent.',
  },
  {
    variant: 'warm',
    title: 'Warm',
    message: 'Warm Purple surface and accent.',
  },
  { variant: 'sky', title: 'Sky', message: 'Sky Cyan surface and accent.' },
  {
    variant: 'orange',
    title: 'Orange',
    message: 'Orange Accent surface and accent.',
  },
];

const usageSnippet = `---
import { Alert } from 'comet-astro';

---

<Alert
  variant="classic"
  title="Profile updated"
  message="Changes are live for everyone on your team."
  dismissible
  dismissLabel="Hide success message"
/>`;

// tint example removed to show palette variants consistently
const propsColumns = [
  { key: 'name', label: 'Prop' },
  { key: 'type', label: 'Type' },
  { key: 'default', label: 'Default' },
  { key: 'description', label: 'Description' },
];

const propsData = [
  {
    name: 'title',
    type: 'string',
    default: "''",
    description:
      'Optional heading rendered above the message copy. Keep it short so screen readers announce the important words first.',
  },
  {
    name: 'message',
    type: 'string',
    default: "''",
    description:
      'Primary text content. Supports plain strings; use the default slot for additional rich content such as links.',
  },
  {
    name: 'variant',
    type: '"info" | "success" | "warning" | "error" | string',
    default: 'info',
    description:
      'One of the semantic variants or a theme palette. Controls icon, accent color and announced urgency.',
  },
  {
    name: 'dismissible',
    type: 'boolean',
    default: 'false',
    description:
      'Adds a close button that hides the alert client-side. Useful for persistent notifications or inline reminders.',
  },
  {
    name: 'dismissLabel',
    type: 'string',
    default: '"Dismiss alert"',
    description:
      'Accessible label for the dismiss button. Customize to localise the action or describe the message context.',
  },
  {
    name: 'className',
    type: 'string',
    default: "''",
    description:
      'Extra classes merged onto the wrapper. Use arbitrary selectors to retheme the close button or tweak spacing.',
  },
];
---

<DocsLayout
  seoTitle="Alert"
  seoDescription="Accessible status messaging with semantic variants, optional dismissal, and brandable styling hooks."
>
  <Headline level="h1" textSize="2xl">Alert</Headline>
  <section class="space-y-4">
    <Paragraph class="text-base text-slate-100">
      Alerts sit inline with the surrounding layout to acknowledge actions,
      surface warnings, or call out critical failures. Each variant ships with
      AAA-friendly contrast in light and dark themes, announces itself with the
      correct live region, and respects reduced-motion preferences.
    </Paragraph>
    <Paragraph class="text-base text-slate-200">
      Reach for alerts when in-context feedback keeps people moving. For broader
      announcements that appear across many screens, pair alerts with a banner
      or toast pattern instead.
    </Paragraph>
  </section>

  <section class="mt-10 space-y-6">
    <Headline level="h2" textSize="xl" className="font-semibold text-slate-100"
      >Props</Headline
    >
    <div>
      <Table columns={propsColumns} data={propsData} responsive={true} />
    </div>
  </section>

  <section class="mt-10 space-y-6">
    <Headline level="h2" textSize="xl" className="font-semibold text-slate-100"
      >Usage</Headline
    >
    <Paragraph class="text-base text-slate-200">
      Import the <InlineCode>Alert</InlineCode> component from the package entry
      point and choose a <InlineCode>variant</InlineCode> that matches the message's
      tone (for example, <InlineCode>info</InlineCode>,
      <InlineCode>success</InlineCode>, <InlineCode>warning</InlineCode>, or
      <InlineCode>error</InlineCode>). Set <InlineCode>dismissible</InlineCode> when
      users should be able to close the alert. If you enable
      <InlineCode>dismissible</InlineCode>, provide a descriptive
      <InlineCode>dismissLabel</InlineCode> to localize the control and improve accessibility
      for screen reader users.
    </Paragraph>
    <pre
      class="overflow-x-auto rounded-lg border border-slate-700/70 bg-slate-950/80 p-4 text-sm text-slate-50 shadow-inner">
      <code class="language-astro">{usageSnippet}</code>
    </pre>
    <Paragraph class="text-sm text-slate-300">
      The package also exports a helper named <InlineCode
        >alertVariants</InlineCode
      >
      which returns the underlying Tailwind class strings for each palette. This
      helper is useful when you need to apply the same palette programmatically across
      multiple components or when composing custom UI fragments. Example (local import):
      <InlineCode
        >import &#123; alertVariants &#125; from '../../components/Alert.astro'</InlineCode
      >.
    </Paragraph>
  </section>

  <section class="mt-10 space-y-8">
    <Headline level="h2" textSize="xl" className="font-semibold text-slate-100"
      >Examples</Headline
    >

    <article class="space-y-4">
      <div>
        <Headline
          level="h3"
          textSize="lg"
          className="font-semibold text-slate-100"
          >Contextual messaging</Headline
        >
        <Paragraph class="text-base text-slate-200">
          Pick the variant that matches the message urgency. Warnings and errors
          announce using an assertive live region so assistive tech can
          interrupt other output.
        </Paragraph>
      </div>
      <div class="grid gap-4 sm:grid-cols-2">
        {
          variantExamples.map((props) => (
            <Alert {...props} key={props.variant} />
          ))
        }
      </div>
    </article>

    <article class="space-y-4">
      <div>
        <Headline
          level="h3"
          textSize="lg"
          className="font-semibold text-slate-100"
          >Dismissible reminder</Headline
        >
        <Paragraph class="text-base text-slate-200">
          Toggle <InlineCode>dismissible</InlineCode> for alerts that can safely
          disappear without a page reload. The component toggles <InlineCode
            >hidden</InlineCode
          > and <InlineCode>aria-hidden</InlineCode> so repeat announcements stop
          once dismissed.
        </Paragraph>
      </div>
      <Alert
        variant="warning"
        title="Trial ending soon"
        message="Upgrade your workspace to keep scheduled automations running."
        dismissible
        dismissLabel="Hide trial reminder"
      />
    </article>

    <article class="space-y-4">
      <div>
        <Headline
          level="h3"
          textSize="lg"
          className="font-semibold text-slate-100"
          >Custom surface styling</Headline
        >
        <Paragraph class="text-base text-slate-200">
          Use <InlineCode>className</InlineCode> with arbitrary variants to match
          your brand palette or a darker surface while keeping the accessibility
          wiring intact.
        </Paragraph>
      </div>
      <Alert
        variant="classic"
        title="Maintenance window"
        message="Dashboards will be read-only on Saturday 22:00â€“23:00 CET."
      />
    </article>

    <article class="space-y-4">
      <div>
        <Headline
          level="h3"
          textSize="lg"
          className="font-semibold text-slate-100"
          >Overriding styles (tailwind-variants)</Headline
        >
        <Paragraph class="text-base text-slate-200">
          If you need to tweak the default classes, you can either use the
          <InlineCode>alertVariants</InlineCode> helper or directly override the
          underlying Tailwind class strings. This library uses
          <InlineCode>tailwind-variants</InlineCode>, so the same overriding
          techniques described in the official documentation apply.
        </Paragraph>
        <Paragraph class="text-base text-slate-200">
          See the <a
            class="underline text-sky-400"
            href="https://www.tailwind-variants.org/docs/overriding-styles"
            target="_blank"
            rel="noopener noreferrer"
            >"Overriding styles" guide on tailwind-variants</a
          > for details.
        </Paragraph>
        <Paragraph class="text-sm text-slate-300">
          Short example: import <InlineCode>alertVariants</InlineCode>, get the
          classes for a variant and append or replace utility classes as needed.
        </Paragraph>
        <Paragraph class="text-sm text-slate-300">
          The following two examples show (1) a minimal <InlineCode
            >tailwind-variants</InlineCode
          > config file you can add to your app and (2) an <InlineCode
            >.astro</InlineCode
          > example that imports the helper, patches the returned slot classes, and
          passes them to the <InlineCode>Alert</InlineCode> component.
        </Paragraph>

        <Paragraph class="text-sm text-slate-300"
          >Self-contained Astro example (shows the tailwind-variants overriding
          pattern inline).</Paragraph
        >
        <pre
          class="overflow-x-auto rounded-lg border border-slate-700/70 bg-slate-950/80 p-4 text-sm text-slate-50 shadow-inner">
          <code class="language-astro">{`---
import Alert from '../../components/Alert.astro';
import { tv } from 'tailwind-variants';

// define a minimal tv config inline (you can move this to a shared file)
const alertVariants = tv({
  base: 'rounded-md p-4 flex gap-3 items-start',
  slots: {
    wrapper: 'rounded-md p-4 flex gap-3 items-start',
    icon: 'flex-shrink-0',
    title: 'font-semibold',
    message: 'text-sm'
  },
  variants: {
    variant: {
      info: {
        wrapper: 'bg-sky-50 text-sky-900',
        icon: 'text-sky-600'
      },
      classic: {
        wrapper: 'bg-classic-50 text-classic-900',
        icon: 'text-classic-600'
      }
    }
  },
  defaultVariants: { variant: 'info' }
});

// get the slot classes for the 'classic' variant
const slots = alertVariants({ variant: 'classic' });
// patch the wrapper at runtime (replace background and add padding)
const patched = slots.wrapper.replace('bg-classic-50', 'bg-brand-600').concat(' px-6');
---

<Alert variant="classic" className={patched} title="TV Override" message="Example showing overriding styles inline in Astro." />`}</code>
        </pre>
      </div>
    </article>
  </section>
</DocsLayout>
