---
import DocsLayout from '../../layouts/DocsLayout.astro';
import Alert from '../../components/Alert.astro';
import Table from '../../components/Table.astro';
import Headline from '../../components/Headline.astro';
import Paragraph from '../../components/Paragraph.astro';
import CodeBlock from '../../components/CodeBlock.astro';
import InlineCode from '../../components/InlineCode.astro';

const variantExamples = [
  {
    variant: 'info',
    title: 'Heads up',
    message:
      'We refreshed our privacy policy. Review the highlights in 3 minutes.',
  },
  {
    variant: 'success',
    title: 'All saved',
    message: 'Your profile updates are live and visible to teammates.',
  },
  {
    variant: 'warning',
    title: 'Action suggested',
    message: 'Double-check your billing details before the next cycle.',
  },
  {
    variant: 'error',
    title: 'Sync failed',
    message: 'We could not reach the API. Try again in a few minutes.',
  },
];

const usageSnippet = `---
import { Alert } from 'comet-astro';

---

<Alert
  variant="info"
  title="Profile updated"
  message="Changes are live for everyone on your team."
  dismissible
  dismissLabel="Hide success message"
/>`;

const brandSnippet = `const brandClassName = ['BrandAlert'].join(' ');

<Alert
  variant="warning"
  title="Data refresh ongoing"
  message="Live dashboards may be delayed for a few minutes."
  className={brandClassName}
/>

<style>
  :global(.BrandAlert.Alert) {
    border-radius: 18px;
    padding: 1.25rem;
    background: linear-gradient(135deg, #0f172a 0%, #020617 100%);
    box-shadow: 0 20px 60px -28px rgba(0, 0, 0, 0.75);
  }
  :global(.BrandAlert .Alert__Icon) {
    background: rgba(255, 255, 255, 0.08);
    color: #fbbf24;
  }
  :global(.BrandAlert .Alert__Title) {
    color: #fef3c7;
  }
  :global(.BrandAlert .Alert__Message) {
    color: #e2e8f0;
  }
  :global(.BrandAlert .Alert__Close) {
    color: #fef3c7;
  }
</style>`;

const propsColumns = [
  { key: 'name', label: 'Prop' },
  { key: 'type', label: 'Type' },
  { key: 'default', label: 'Default' },
  { key: 'description', label: 'Description' },
];

const propsData = [
  {
    name: 'title',
    type: 'string',
    default: "''",
    description:
      'Optional heading rendered above the message copy. Short titles are announced first by screen readers.',
  },
  {
    name: 'message',
    type: 'string',
    default: "''",
    description:
      'Primary text content. Use the default slot for richer markup, lists, or inline links.',
  },
  {
    name: 'icon',
    type: 'string',
    default: 'undefined',
    description:
      'Override the default icon with custom text or an emoji. When set, the component renders it as-is.',
  },
  {
    name: 'variant',
    type: '"info" | "success" | "warning" | "error"',
    default: 'info',
    description:
      'Semantic intent controls accent, icon and aria-live role. Info/success use a polite live region; warning/error announce assertively.',
  },
  {
    name: 'dismissible',
    type: 'boolean',
    default: 'false',
    description:
      'Adds a close button that hides the alert client-side. Hidden alerts set aria-hidden so they are not re-announced.',
  },
  {
    name: 'dismissLabel',
    type: 'string',
    default: '"Dismiss alert"',
    description:
      'Accessible label for the dismiss button. Localize this text or tailor it to the alert context.',
  },
  {
    name: 'className',
    type: 'string',
    default: "''",
    description:
      'Extra classes merged onto the wrapper. BEM hooks are exposed for overrides: Alert, Alert--info|success|warning|error, Alert__Inner, Alert__Icon, Alert__IconEmoji, Alert__IconSvg, Alert__Body, Alert__Label, Alert__Title, Alert__Message, Alert__Slot, Alert__Close, Alert__CloseIcon, Alert__CloseLabel.',
  },
];
---

<DocsLayout
  seoTitle="Alert"
  seoDescription="Accessible status messaging with semantic variants, optional dismissal, and brandable styling hooks."
>
  <Headline level="h1" textSize="2xl">Alert</Headline>
  <section class="space-y-4">
    <Paragraph class="text-base text-slate-100">
      Alerts sit inline with the surrounding layout to acknowledge actions,
      surface warnings, or call out critical failures. Each variant ships with
      AAA-friendly contrast in light and dark themes, announces itself with the
      correct live region, and respects reduced-motion preferences.
    </Paragraph>
    <Paragraph class="text-base text-slate-200">
      Reach for alerts when in-context feedback keeps people moving. For broader
      announcements that appear across many screens, pair alerts with a banner
      or toast pattern instead.
    </Paragraph>
  </section>

  <section class="mt-10 space-y-6">
    <Headline level="h2" textSize="lg" weight="bold" className="text-slate-100"
      >Props</Headline
    >
    <div>
      <Table columns={propsColumns} data={propsData} responsive={true} />
    </div>
  </section>

  <section class="mt-10 space-y-6">
    <Headline level="h2" textSize="lg" weight="bold" className="text-slate-100"
      >Usage</Headline
    >
    <Paragraph class="text-base text-slate-200">
      Import the <InlineCode>Alert</InlineCode> component and select a semantic
      <InlineCode>variant</InlineCode> matching the message tone:
      <InlineCode>info</InlineCode>, <InlineCode>success</InlineCode>,
      <InlineCode>warning</InlineCode>, or <InlineCode>error</InlineCode>.
      Toggle
      <InlineCode>dismissible</InlineCode> when the user can safely close the message,
      and provide a localized <InlineCode>dismissLabel</InlineCode> for screen readers.
    </Paragraph>
    <CodeBlock code={usageSnippet} language="astro" />
    <Paragraph class="text-sm text-slate-300">
      BEM classes are rendered alongside Tailwind utilities so external styles
      can override the surface: <InlineCode>Alert</InlineCode>, variant
      modifiers like <InlineCode>Alert--warning</InlineCode>, plus sub-elements
      such as
      <InlineCode>Alert__Icon</InlineCode> and <InlineCode
        >Alert__Close</InlineCode
      >. Use <InlineCode>className</InlineCode> to add your own grouping class for
      targeted overrides.
    </Paragraph>
  </section>

  <section class="mt-10 space-y-8">
    <Headline level="h2" textSize="lg" weight="bold" className="text-slate-100"
      >Examples</Headline
    >

    <article class="space-y-4">
      <div>
        <Headline
          level="h3"
          textSize="lg"
          className="font-semibold text-slate-100"
          >Contextual messaging</Headline
        >
        <Paragraph class="text-base text-slate-200">
          Pick the variant that matches the message urgency. Warnings and errors
          announce with an assertive live region so assistive tech can interrupt
          other output when necessary.
        </Paragraph>
      </div>
      <div class="grid gap-4 sm:grid-cols-2">
        {
          variantExamples.map((props) => (
            <Alert {...props} key={props.variant} />
          ))
        }
      </div>
    </article>

    <article class="space-y-4">
      <div>
        <Headline
          level="h3"
          textSize="lg"
          className="font-semibold text-slate-100"
          >Dismissible reminder</Headline
        >
        <Paragraph class="text-base text-slate-200">
          Toggle <InlineCode>dismissible</InlineCode> for alerts that can safely disappear
          without a page reload. The component toggles <InlineCode
            >hidden</InlineCode
          > and <InlineCode>aria-hidden</InlineCode> so repeat announcements stop
          once dismissed.
        </Paragraph>
      </div>
      <Alert
        variant="warning"
        title="Trial ending soon"
        message="Upgrade your workspace to keep scheduled automations running."
        dismissible
        dismissLabel="Hide trial reminder"
      />
    </article>

    <article class="space-y-6">
      <div>
        <Headline
          level="h3"
          textSize="lg"
          className="font-semibold text-slate-100"
          >Styling &amp; overrides</Headline
        >
        <Paragraph class="text-base text-slate-200">
          Add a grouping class via <InlineCode>className</InlineCode> and target the
          exposed BEM hooks to match your brand. The defaults stay in place, so your
          overrides layer cleanly on top of the Tailwind utilities.
        </Paragraph>
        <Paragraph class="text-sm text-slate-400">
          Available hooks: <InlineCode>Alert</InlineCode> (root) with modifiers like
          <InlineCode>Alert--info</InlineCode>, plus <InlineCode
            >Alert__Inner</InlineCode
          >, <InlineCode>Alert__Icon</InlineCode>, <InlineCode
            >Alert__Title</InlineCode
          >, <InlineCode>Alert__Message</InlineCode>, <InlineCode
            >Alert__Slot</InlineCode
          >, and <InlineCode>Alert__Close</InlineCode> (including close icon and label).
        </Paragraph>
      </div>

      <div class="space-y-4">
        <Alert
          variant="warning"
          title="Data refresh ongoing"
          message="Live dashboards may be delayed for a few minutes."
          className="BrandAlert"
        />

        <CodeBlock code={brandSnippet} language="astro" />
      </div>
    </article>
  </section>
</DocsLayout>

<style>
  :global(.BrandAlert.Alert) {
    border-radius: 18px;
    padding: 1.25rem;
    background: linear-gradient(135deg, #0f172a 0%, #020617 100%);
    box-shadow: 0 20px 60px -28px rgba(0, 0, 0, 0.75);
  }
  :global(.BrandAlert .Alert__Icon) {
    background: rgba(255, 255, 255, 0.08);
    color: #fbbf24;
  }
  :global(.BrandAlert .Alert__Title) {
    color: #fef3c7;
  }
  :global(.BrandAlert .Alert__Message) {
    color: #e2e8f0;
  }
  :global(.BrandAlert .Alert__Close) {
    color: #fef3c7;
  }
</style>
