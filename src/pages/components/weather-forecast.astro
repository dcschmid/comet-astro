---
import DocsLayout from '../../layouts/DocsLayout.astro';
import WeatherForecast from '../../components/WeatherForecast.astro';

const usageSnippet = `---\nimport { WeatherForecast } from 'comet-astro';\n\n---\n<!-- Static demo (no fetch) -->\n<WeatherForecast location="Demo Location" disableFetch />\n\n<!-- Live daily forecast using coordinates (5 days default) -->\n<WeatherForecast\n  location="Berlin"\n  latitude={52.52}\n  longitude={13.40}\n/>\n\n<!-- 7 days, auto refresh every 60 minutes -->\n<WeatherForecast\n  location="Berlin"\n  latitude={52.52}\n  longitude={13.40}\n  days={7}\n  refreshInterval={60}\n/>\n\n<!-- Custom accessible label -->\n<WeatherForecast\n  location="Alpine Camp"\n  latitude={46.95}\n  longitude={7.44}\n  ariaLabel="Daily forecast for Alpine Camp"\n/>`;
---

<DocsLayout
  seoTitle="WeatherForecast"
  seoDescription="Lean daily weather overview (day label, icon, condition, high/low temperature, precipitation chance) with optional live Open‑Meteo data. Built for WCAG AAA, zero bloat, quick embedding."
  prose={true}
>
  <section class="space-y-4">
    <p class="text-base text-slate-100">
      <strong>WeatherForecast</strong> gives you a fast multi‑day snapshot (default
      5 days) of the core signal a user actually scans: day label (Today/Tomorrow/Weekday),
      an icon, plain‑language condition, high / low in °C, and precipitation probability.
      Everything else (wind charts, sunrise tables, variant theming) is intentionally
      excluded for speed, cognitive simplicity, and tiny payload.
    </p>
    <p class="text-base text-slate-200">
      Provide <code>latitude</code> + <code>longitude</code> to fetch daily <code
        >temperature_2m_max</code
      >, <code>temperature_2m_min</code>, <code
        >precipitation_probability_max</code
      >, and <code>weather_code</code> from Open‑Meteo. Omit them (or set <code
        >disableFetch</code
      >) to render deterministic fallback demo data—useful for skeleton screens,
      design previews, and offline examples. Optional <code
        >refreshInterval</code
      > (minutes) keeps cards current; 0 means "static snapshot".
    </p>
    <p class="text-base text-slate-200">
      Visual contrast: only the tiny status dot is colored; all textual content
      stays neutral to guarantee WCAG AAA in light/dark. Loading shimmer
      respects <code>prefers-reduced-motion</code>; high contrast mode adds an
      outline without altering structure. No focus traps, no nested interactive
      controls—cards are passive, making screen reader output concise.
    </p>
    <p class="text-sm text-slate-500 dark:text-slate-400">
      Ideal use cases: sidebar forecast, dashboard tile, newsletter snippet,
      static SSG export. Avoid for long range (&gt;7 day) or probabilistic
      ensemble displays.
    </p>
  </section>

  <section class="mt-10 space-y-6">
    <h2 class="text-xl font-semibold text-slate-100">Props</h2>
    <dl class="grid gap-6 sm:grid-cols-2">
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          location?
        </dt>
        <dd class="text-sm text-slate-200">
          Human readable place label. Defaults to “Demo Location”.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          latitude? / longitude?
        </dt>
        <dd class="text-sm text-slate-200">
          Coordinates enabling automatic Open‑Meteo daily fetch. Provide both
          values.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          days?
        </dt>
        <dd class="text-sm text-slate-200">
          Number of days (1–7) to display. Defaults to 5.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          disableFetch?
        </dt>
        <dd class="text-sm text-slate-200">
          Skips network calls; shows static fallback forecast cards.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          refreshInterval?
        </dt>
        <dd class="text-sm text-slate-200">
          Minutes between automatic updates. 0 disables auto refresh (default).
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          ariaLabel?
        </dt>
        <dd class="text-sm text-slate-200">
          Custom accessible region label. Defaults to “Daily forecast for
          &#123;location&#125;”.
        </dd>
      </div>
      <div
        class="space-y-1 rounded-lg border border-slate-700/75 bg-slate-900/60 p-4 shadow-sm"
      >
        <dt
          class="text-sm font-semibold uppercase tracking-wide text-slate-200"
        >
          class?
        </dt>
        <dd class="text-sm text-slate-200">
          Tailwind utility overrides appended to the root container.
        </dd>
      </div>
    </dl>
  </section>

  <section class="mt-10 space-y-6">
    <h2 class="text-xl font-semibold text-slate-100">Usage</h2>
    <p class="text-base text-slate-200">
      Supply coordinates for live data or omit them for a static demo snapshot.
      Auto refresh keeps values current at the chosen interval. All dynamic
      states (loading / error) are announced through a polite status line and <code
        >aria-busy</code
      > toggling.
    </p>
    <pre
      class="overflow-x-auto rounded-lg border border-slate-700/70 bg-slate-950/80 p-4 text-sm text-slate-50 shadow-inner">
      <code class="language-astro">{usageSnippet}</code>
    </pre>
  </section>

  <section class="mt-10 space-y-8">
    <h2 class="text-xl font-semibold text-slate-100">Demo</h2>
    <div class="flex flex-wrap gap-6">
      <WeatherForecast location="Demo Location" disableFetch />
      <WeatherForecast
        location="Berlin"
        latitude={52.52}
        longitude={13.4}
        days={7}
        refreshInterval={120}
      />
    </div>
  </section>

  <section class="mt-10 space-y-4">
    <h2 class="text-xl font-semibold text-slate-100">Accessibility</h2>
    <p class="text-base text-slate-200">
      The root container is a labeled <code>region</code> so assistive tech can identify
      the scope of the forecast. A polite live region announces loading and error
      messages; <code>aria-busy</code> reflects network activity. Indicator dots
      are supplemental only—text always conveys condition.
    </p>
    <p class="text-base text-slate-200">
      All text meets ≥9:1 contrast in both light and dark themes; colored dots
      are small enough not to reduce readability. High contrast mode adds an
      outline around the component. Motion (skeleton shimmer) disables
      automatically under <code>prefers-reduced-motion</code>.
    </p>
    <p class="text-base text-slate-200">
      No nested interactive controls—cards are static content. Screen readers
      receive semantic text without extraneous roles.
    </p>
  </section>
</DocsLayout>
