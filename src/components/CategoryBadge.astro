---
/**
 * CategoryBadge - Badge with automatic color based on category content
 *
 * @deprecated This component is now a wrapper around Badge with autoColor.
 * Consider using Badge directly with autoColor={true} for new code.
 *
 * @example
 * // Old usage (still works):
 * <CategoryBadge category="Rock" />
 *
 * // New recommended usage:
 * <Badge label="Rock" autoColor />
 */
import Badge, { type BadgeVariant } from './Badge.astro';

interface Props {
  category?: string;
  label?: string;
  tone?:
    | 'purple'
    | 'blue'
    | 'emerald'
    | 'amber'
    | 'rose'
    | 'sky'
    | 'indigo'
    | 'slate'
    | 'neutral';
  /** Optional semantic element (no longer used, kept for backward compatibility) */
  as?: 'span' | 'div';
  /** Optional link target turning badge into anchor */
  href?: string;
  /** Optional aria-label if label text not descriptive */
  ariaLabel?: string;
  /** Size variant */
  size?: 'sm' | 'md' | 'lg';
  className?: string;
}

const {
  category,
  label,
  tone,
  href,
  size = 'md',
  className = '',
} = Astro.props as Props;

// Determine display text
const displayText = (label ?? category ?? 'Category').trim();

// Map tone to Badge variant, or use autoColor if no tone specified
const toneToVariant: Record<string, BadgeVariant> = {
  purple: 'purple',
  blue: 'blue',
  emerald: 'emerald',
  amber: 'amber',
  rose: 'rose',
  sky: 'sky',
  indigo: 'indigo',
  slate: 'slate',
  neutral: 'neutral',
};

const variant = tone ? toneToVariant[tone] : undefined;
const useAutoColor = !tone;
---

<Badge
  label={displayText}
  variant={variant}
  autoColor={useAutoColor}
  size={size}
  href={href}
  className={`uppercase ${className}`.trim()}
/>
