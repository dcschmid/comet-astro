---
interface Props {
  address?: string;
  placeId?: string;
  coordinates?: { lat: number; lng: number };
  zoom?: number;
  aspectRatio?: '16/9' | '4/3' | '1/1' | '21/9';
  className?: string;
}

const {
  address,
  placeId,
  coordinates,
  zoom = 15,
  aspectRatio = '16/9',
  className = '',
} = Astro.props;

const ratioClasses = {
  '16/9': 'aspect-video',
  '4/3': 'aspect-[4/3]',
  '1/1': 'aspect-square',
  '21/9': 'aspect-[21/9]',
};

let embedSrc = 'https://www.google.com/maps/embed/v1/place?key=YOUR_API_KEY';

if (placeId) {
  embedSrc = `https://www.google.com/maps/embed/v1/place?key=YOUR_API_KEY&q=place_id:${placeId}&zoom=${zoom}`;
} else if (coordinates) {
  embedSrc = `https://www.google.com/maps/embed/v1/view?key=YOUR_API_KEY&center=${coordinates.lat},${coordinates.lng}&zoom=${zoom}`;
} else if (address) {
  embedSrc = `https://www.google.com/maps/embed/v1/place?key=YOUR_API_KEY&q=${encodeURIComponent(address)}&zoom=${zoom}`;
}
---

<div
  class={`relative overflow-hidden rounded-xl border border-slate-200 bg-slate-950 ${ratioClasses[aspectRatio]} ${className} dark:border-slate-700`}
>
  <iframe
    src={embedSrc}
    width="100%"
    height="100%"
    style="border:0;"
    allowfullscreen
    loading="lazy"
    referrerpolicy="no-referrer-when-downgrade"
    class="absolute inset-0 w-full h-full"></iframe>
</div>

<!-- Note: Replace YOUR_API_KEY with actual Google Maps API key -->
